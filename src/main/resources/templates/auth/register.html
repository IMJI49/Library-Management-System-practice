<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회원가입</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div th:fragment="content">
        <div class="container mt-5 mb-5">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <h2 class="text-center mb-4">
                        회원가입
                    </h2>
                    <!-- 에러 메세지 -->
                    <div th:if="${error}" class="alert alert-danger">
                        <span  th:text="${error}"></span>
                    </div>
                    <!-- 
                        Thymeleaf 폼 객체 바인딩 설정
                            - th:object="${member}"
                                - Controller에서 전달받은 MemberRegistrationDto 객체를 폼과 바인딩
                            - th:field="*{필드명}"
                                - 폼 필드와 DTO 객체의 속성을 연결
                            - 장점 : 유효성 검사, 에러메세지, 값 유지 등이 자동으로 처리됨
                    -->
                    <!-- 회원 가입 폼 -->
                    <form th:action="@{/auth/register}" th:object="${member}" method="post">
                        <div class="mb-3">
                            <label for="email" class="form-label">이메일<span class="text-danger">*</span></label>
                            <!--  -->
                            <input type="text" th:field="*{email}" class="form-control" id="email" placeholder="이메일을 입력하세요" required>
                        </div>
                        <div class="mb-3">
                            <label for="password" class="form-label">비밀번호<span class="text-danger">*</span></label>
                            <input type="password" th:field="*{password}" class="form-control" id="password" placeholder="비밀번호를 입력하세요" minlength="8" required>
                            <small class="text-muted">
                                8자이상, 영문과 숫자 포함
                            </small>
                        </div>
                        <div class="mb-3">
                            <label for="confirmPassword" class="form-label">비밀번호 확인<span class="text-danger">*</span></label>
                            <input type="password" th:field="*{confirmPassword}" class="form-control" id="confirmPassword" minlength="8" placeholder="비밀번호를 다시 입력하세요" required>
                            <small class="text-muted">
                                8자이상, 영문과 숫자 포함
                            </small>
                        </div>
                        <div class="mb-3">
                            <label for="name" class="form-label">이름<span class="text-danger">*</span></label>
                            <input type="text" th:field="*{name}" class="form-control" id="name" placeholder="이름을 입력하세요" required>
                        </div>
                        <div class="mb-3">
                            <label for="phone" class="form-label">전화번호<span class="text-danger">*</span></label>
                            <input type="text" th:field="*{phone}" class="form-control" id="phone" placeholder="010-1234-5678" required>
                        </div>
                        <div class="mb-3">
                            <label for="address" class="form-label">주소</label>
                            <input type="text" th:field="*{address}" class="form-control" id="address" placeholder="주소를 입력하세요">
                        </div>
                        <!-- 약관 동의 섹션 -->
                        <div class="mb-4">
                            <h6 class="fw-bold">약관 동의</h6>
                            <div class="form-check mb-2">
                                <!-- 
                                    data-bs-toggle="modal" <== Bootstrap 모달창 트리거
                                -->
                                <input class="form-check-input" type="checkbox" th:field="*{termsAgreed}" id="termsAgreed" required>
                                <label class="form-check-label" for="termsAgreed">
                                    <a th:href="@{/auth/register}" data-bs-toggle="modal" data-bs-target="#termsModal">
                                        서비스 이용약관
                                    </a>에 동의합니다.
                                    <span class="text-danger">*</span>
                                </label>
                            </div>
                            <!-- 개인정보 처리방침 필수 -->
                            <div class="form-check mb-2">
                                <!-- 
                                    data-bs-toggle="modal" <== Bootstrap 모달창 트리거
                                -->
                                <input class="form-check-input" type="checkbox" th:field="*{privacyAgreed}" id="privacyAgreed" required>
                                <label class="form-check-label" for="privacyAgreed">
                                    <a th:href="@{/auth/register}" data-bs-toggle="modal" data-bs-target="#privacyModal">
                                        개인정보 처리방침
                                    </a>에 동의합니다.
                                    <span class="text-danger">*</span>
                                </label>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary w-100 mb-3">회원가입</button>
                        <!-- 로그인 페이지 이동 링크 -->
                        <div class="text-center">
                            <a th:href="@{/auth/login}" class="btn btn-secondary">
                                로그인 하기
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- 
        Bootstrap 모달 컴포넌트 - 서비스 이용약관
        - modal fade : 모달창이 페이드인 효과로 나타남
        - id="termsModal" : 모달창의 고유 ID, data-bs-target과 연결
    -->
    <div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="termsModalLabel">서비스 이용약관</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="text-muted mb-3">
                        <small>제정일 : 2025년 9월 1일 | 시행일 : 2025년 10월 1일</small>
                    </div>
                    <h6>제 1조</h6>
                    <p>본 약관은 도서관 시스템(이하 "회사")이 제공하는 모든 서비스(이하 "서비스")의 이용과 관련하여 회사와 이용자 간의 권리, 의무 및 책임사항을 규정함을 목적으로 합니다.</p>
                    <h6>제 2조 (약관의 효력 및 변경)</h6>
                    <p>① 본 약관은 서비스 화면에 게시하거나 기타의 방법으로 이용자에게 공지함으로써 효력이 발생합니다.<br>
                    ② 회사는 관련 법령을 위배하지 않는 범위에서 본 약관을 변경할 수 있으며, 변경된 약관은 제1항과 같은 방법으로 공지 또는 통지함으로써 효력이 발생합니다.</p>
                    <h6>제 3조 (약관 외 준칙)</h6>
                    <p>본 약관에 명시되지 않은 사항에 대해서는 관계법령 및 회사가 정한 서비스의 세부 이용지침 등의 규정에 따릅니다.</p>
                    <h6>제 4조 (이용계약의 성립)</h6>
                    <p>① 이용계약은 이용자가 본 약관에 동의하고 회원가입 신청을 완료함으로써 성립됩니다.<br>
                    ② 회사는 다음 각 호에 해당하는 신청에 대해서는 승낙을 하지 않을 수 있습니다.<br>
                    1. 타인의 명의를 도용하여 신청한 경우<br>
                    2. 이용 신청 시 필요사항을 허위로 기재한 경우<br>
                    3. 기타 회사가 정한 이용신청 요건을 충족하지 못한 경우</p>
                    <h6>제 5조 (서비스의 제공 및 변경)</h6>
                    <p>① 회사는 다음과 같은 서비스를 제공합니다.<br>
                    1. 도서 검색 및 열람 서비스<br>
                    2. 도서 대출 및 반납 서비스<br>
                    3. 회원 관리 서비스<br>
                    4. 기타 회사가 정하는 서비스<br>
                    ② 회사는 서비스의 내용 및 제공 방식을 변경할 수 있으며, 변경 시에는 변경된 내용과 시행일자를 제1항과 같은 방법으로 공지합니다.</p>
                    <h6>제 6조 (서비스 이용의 제한 및 중지)</h6>
                    <p>① 회사는 다음 각 호에 해당하는 경우 서비스 이용을 제한하거나 중지할 수 있습니다.<br>
                    1. 이용자가 본 약관을 위반한 경우<br>
                    2. 서비스 운영을 위해 필요한 경우<br>
                    3. 기타 회사가 정한 이용제한 요건에 해당하는 경우<br>
                    ② 회사는 서비스 이용 제한 또는 중지 시 그 사유와 기간을 이용자에게 통지합니다.</p>
                    <h6>제 7조 (회원의 의무)</h6>
                    <p>① 회원은 다음 각 호의 행위를 하여서는 안 됩니다.<br>
                    1. 신청 또는 변경 시 허위 내용의 등록<br>
                    2. 타인의 정보 도용<br>
                    3. 회사가 게시한 정보의 변경<br>
                    4. 회사가 정한 정보 이외의 정보(컴퓨터 프로그램 등)의 송신 또는 게시<br>
                    5. 회사 및 기타 제3자의 저작권 등 지적 재산권 침해<br>
                    6. 회사 및 기타 제3자의 명예를 손상시키거나 업무를 방해하는 행위<br>
                    7. 외설 또는 폭력적인 메시지, 화상, 음성, 기타 공서양속에 반하는 정보를 서비스에 공개 또는 게시하는 행위<br>
                    8. 회사의 동의 없이 영리를 목적으로 서비스를 사용하는 행위<br>
                    9. 기타 불법적이거나 부당한 행위</p>
                    <h6>제 8조 (개인정보보호)</h6>
                    <p>회사는 관련 법령이 정하는 바에 따라 이용자의 개인정보를 보호하기 위해 노력하며, 개인정보의 수집, 이용, 제공 등에 대해서는 회사의 개인정보처리방침에 따릅니다.</p>
                    <h6>제 9조 (면책조항)</h6>
                    <p>① 회사는 천재지변, 불가항력적 사유 또는 이용자의 귀책사유로 인한 서비스 이용 장애에 대하여 책임을 지지 않습니다.<br>
                    ② 회사는 이용자가 서비스를 이용하여 기대하는 이익을 얻지 못하거나 상실한 것에 대하여 책임을 지지 않습니다.<br>
                    ③ 회사는 이용자가 서비스를 이용함에 있어 게재된 정보, 자료, 사실의 신뢰도, 정확성 등 내용에 관하여는 책임을 지지 않습니다.</p>
                    <h6>제 10조 (분쟁의 해결)</h6>
                    <p>① 회사와 이용자는 서비스 이용과 관련하여 발생한 분쟁을 원만하게 해결하기 위해 노력합니다.<br>
                    ② 전항의 노력에도 불구하고 분쟁이 해결되지 않을 경우, 분쟁의 관할은 회사의 본사 소재지를 관할하는 법원으로 합니다.</p>
                    <h6>부칙</h6>
                    <p>본 약관은 2025년 10월 1일부터 시행됩니다.</p>
                    <div class="text-center mt-4">
                        <small class="text-muted">도서관 관리 시스템 운영 팀</small>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- 
        Bootstrap 모달 컴포넌트 - 개인정보 처리방침
        - modal fade : 모달창이 페이드인 효과로 나타남
        - id="privacyModal" : 모달창의 고유 ID, data-bs-target과 연결
    -->
    <div class="modal fade" id="privacyModal" tabindex="-1" aria-labelledby ="privacyModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="privacyModalLabel">개인정보 처리방침</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="text-muted mb-3">
                        <small>제정일 : 2025년 9월 1일 | 시행일 : 2025년 10월 1일</small>
                    </div>
                    <h6>제 1조 (개인정보의 수집 및 이용 목적)</h6>
                    <p>회사는 수집한 개인정보를 다음의 목적을 위해 활용합니다.<br>
                    1. 서비스 제공 및 회원 관리<br>
                    2. 서비스 개선 및 신규 서비스 개발<br>
                    3. 마케팅 및 광고에 활용<br>
                    4. 법적 의무 준수</p>
                    <h6>제 2조 (수집하는 개인정보의 항목 및 수집 방법)</h6>
                    <p>① 회사는 회원가입, 서비스 이용, 이벤트 참여 등 다양한 경로를 통해 개인정보를 수집합니다.<br>
                    ② 수집하는 개인정보의 항목은 다음과 같습니다.<br>
                    - 필수항목: 이메일, 비밀번호, 이름, 전화번호<br>
                    - 선택항목: 주소</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                </div>
            </div>
        </div>
    </div>
    <th:block th:fragment="scripts">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    </th:block>
</body>
</html>