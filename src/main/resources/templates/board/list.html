<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" th:replace="~{common/layout :: layout(~{::title}, ~{::content}, ~{::css}, ~{::scripts})}">
<head>
    <meta charset="UTF-8">
    <title>ê²Œì‹œíŒ ëª©ë¡</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <th:block th:fragment="css">
        <style>
            /* === í—¤ë” ì˜ì—­ ===*/
            .board-header{
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 30px;
                padding-bottom: 20px;
                border-bottom: 2px solid #333;
            }
            .total-count{
                font-size: 16px;
                color: #495057;
            }
            .total-count strong{
                font-size: 1.2rem;
                color: #007bff;
            }
            /* ê¸€ì“°ê¸° ë²„íŠ¼ */
            .btn-write{
                padding: 10px 20px;
                background-color: #007bff;
                text-decoration: none;
                color: white;
                border: none;
                border-radius: 4px;
                font-weight: 500;
                transition: background-color 0.3s;
            }
            .btn-write:hover{
                background-color: #0056b3;
                cursor: pointer;
            }
            /* === ê²Œì‹œíŒ í…Œì´ë¸” === */
            .board-table{
                width: 100%;
                border-collapse: collapse;
                margin-bottom: 20px;
            }
            /* .board-table thead{} */
            .boarder-table th{
                text-align: center;
                vertical-align: middle;
                font-weight: bold;
                padding: 12px 10px;
                background-color: #f8f9fa;
                border-bottom: 2px solid #dee2eb;
            }
            .board-table td{
                padding: 15px 10px;
                transition: background-color 0.2s;
                vertical-align: middle;
            }
            .board-table tbody tr{
                border-bottom: 1px solid #e9ecef;
                transition: background-color 0.2s;
            }
            .board-table tbody tr:hover{
                background-color: #f8f9fa;
                cursor: pointer;
            }
            .board-table td.center{
                text-align: center;
                vertical-align: middle;
            }
            .board-table td.title{
                text-align: left;
                padding-left: 15px;
            }
            .board-table td.title a{
                text-decoration: none;
                color: #333;
                transition: color 0.2s;
            }
            .board-table td.title a:hover{
                color: #007bff;
                text-decoration: underline;
            }
            /* ëŒ“ê¸€ ìˆ˜ */
            .comment-count{
                font-size: 0.9rem;
                color: #666;
                margin-left: 5px;
            }
            /* === ì¹´í…Œê³ ë¦¬ ë°°ì¹˜ ===*/
            .category-badge{
                display: inline-block;
                padding: 4px 12px;
                border-radius: 12px;
                font-size: 12px;
                font-weight: bold;
                white-space: nowrap;
                background-color: #e9ecef;
            }
            /* ê³µì§€ì‚¬í•­ ì¹´í…Œê³ ë¦¬ - ë¹¨ê°„ìƒ‰ */
            .category-badge.NOTICE{
                background-color: #ff6b6b;
                color: white;
            }
            /* ììœ ê²Œì‹œíŒ ì¹´í…Œê³ ë¦¬ - íŒŒë€ìƒ‰ */
            .category-badge.FREE{
                background-color: #4ecdc4;
                color: white;
            }
            /* ì§ˆë¬¸ê²Œì‹œíŒ ì¹´í…Œê³ ë¦¬ - ë…¸ë€ìƒ‰ */
            .category-badge.QNA{
                background-color: #ffd93d;
                color: #333;
            }
            /* ë¦¬ë·° ì¹´í…Œê³ ë¦¬ - ì—°ë‘ìƒ‰ */
            .category-badge.REVIEW{
                background-color: #a8e6cf;
                color: #2d5f3f;
            }
            /* === í˜ì´ì§• ì˜ì—­ === */
            .pagination{
                display: flex;
                justify-content: center;
                align-items: center;
                gap: 5px;
                margin-top: 40px;
                padding: 20px 0;
            }
            .pagination a{
                text-decoration: none;
            }
            .page-btn{
                min-width: 35px;
                height: 35px;
                padding: 8px 12px;
                border: 1px solid #ddd;
                background-color: #fff;
                color: #333;
                text-decoration: none;
                border-radius: 4px;
                display: inline-flex;
                align-items: center;
                justify-content: center;
                transition: all 0.2s;
            }
            .page-btn:hover{
                background-color: #f8f9fa;
                border-color: #ccc;
                color: #007bff;
            }
            /* í˜„ì¬ í˜ì´ì§€(í™œì„±í™”ëœ ë²„íŠ¼) */
            .page-btn.active{
                background-color: #007bff;
                color: white;
                border-color: #007bff;
                pointer-events: none;
                font-weight: bold;
            }
            .page-btn.active:hover{
                background-color: #0056b3;
                color: white;
                border-color: #0056b3;
                cursor: default;
            }
            /* ì´ì „/ë‹¤ìŒ ê·¸ë£¹ ë²„íŠ¼(<< ì´ì „, ë‹¤ìŒ >>) */
            .page-btn.nav{
                font-weight: bold;
            }
            /* ë¹„í™œì„± ë²„íŠ¼ ìƒíƒœ(í´ë¦­ ë¶ˆê°€ ìƒíƒœ) */
            .page-btn.disabled{
                pointer-events: none;
                color: #cccc;
                border-color: #e9ecef;
                cursor:not-allowed;
                background-color: #f8f9fa;
            }
        </style>
    </th:block>
</head>
<body>
    <!-- ë©”ì¸ ì»¨í…ì¸  ì˜ì—­ -->
    <div th:fragment="content">
        <div class="container my-4">
            <h1 class="mb-4">ğŸ“‹ ê²Œì‹œíŒ</h1>
            <!-- === í—¤ë” : ì „ì²´ ê²Œì‹œê¸€ ìˆ˜ & ê¸€ì“°ê¸° ë²„íŠ¼ === -->
            <div class="board-header">
                <!-- ì „ì²´ ê²Œì‹œê¸€ ìˆ˜ -->
                <div class="total-count">
                    ì „ì²´ ê²Œì‹œê¸€ ìˆ˜: <strong th:text="${totalElements}">0</strong>ê°œ
                </div>
                <!-- ê¸€ì“°ê¸° ë²„íŠ¼ (ë¡œê·¸ì¸í•œ ì‚¬ìš©ìë§Œ í‘œì‹œ) -->
                <a th:href="@{/boards/new}" class="btn-write" sec:authorize="isAuthenticated()">
                    âœï¸ ê¸€ì“°ê¸°
                </a>
            </div>
            <!-- === ê²Œì‹œíŒ ëª©ë¡ í…Œì´ë¸” (ê²Œì‹œê¸€ì´ ìˆì„ ë•Œë§Œ í‘œì‹œ) === -->
            <table class="board-table" th:if="${boards.hasContent()}">
                <thead>
                    <tr class="center">
                        <th style="width: 80px; text-align: center;">ë²ˆí˜¸</th>
                        <th style="width: 120px; text-align: center;">ì¹´í…Œê³ ë¦¬</th>
                        <th style="text-align: center;">ì œëª©</th>
                        <th style="width: 120px; text-align: center;">ì‘ì„±ì</th>
                        <th style="width: 80px; text-align: center;">ì¡°íšŒ</th>
                        <th style="width: 80px; text-align: center;">ì¢‹ì•„ìš”</th>
                        <th style="width: 150px; text-align: center;">ì‘ì„±ì¼</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- boards.contentë¥¼ ë°˜ë³µí•˜ë©° ê° ê²Œì‹œê¸€ ì¶œë ¥ -->
                    <!-- th:each íƒ€ì„ë¦¬í”„ ë°˜ë³µë¬¸ -->
                    <tr th:each="board : ${boards.content}" class="mb-4">
                        <td class="center" th:text="${board.id}">1</td>
                        <td class="center">
                            <!-- th:classappend : ê¸°ì¡´ classì— ë™ì ìœ¼ë¡œ class ì¶”ê°€ -->
                            <!-- board.category.name() -->
                            <!-- board.category.displayname : enumì˜ displayname -->
                            <span class="category-badge" th:classappend="${board.category.name()}" th:text="${board.category.displayName}">ì¼ë°˜</span>
                        </td>
                        <!-- ì œëª© (í´ë¦­ ì‹œ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™) -->
                        <td class="title">
                            <a th:href="@{/boards/{id}(id=${board.id})}" th:text="${board.title}">ê²Œì‹œê¸€ ì œëª©</a>
                            <!-- ëŒ“ê¸€ ìˆ˜ (ëŒ“ê¸€ ìˆì„ë•Œë§Œ) -->
                            <span class="comment-count" th:if="${board.commentCount > 0}" th:text="|[${board.commentCount}]|">(0)</span>
                        </td>
                        <td class="center" th:text="${board.authorName}">ì‘ì„±ì</td>
                        <td class="center" th:text="${board.viewCount}">0</td>
                        <td class="center" th:text="${board.likeCount}">0</td>
                        <!-- ì‘ì„± ì¼ì‹œ -->
                        <!-- #temperals: íƒ€ì„ë¦¬í”„ì˜ ë‚ ì§œ/ì‹œê°„ ìœ í‹¸ë¦¬í‹° -->
                        <td class="center" th:text="${#temporals.format(board.createdAt, 'yyyy-MM-dd HH:mm')}">2024-01-01 12:00</td>
                    </tr>
                </tbody>
            </table>
            <!-- === ê²Œì‹œê¸€ì´ ì—†ì„ ë•Œ í‘œì‹œ === -->
            <div th:if="${!boards.hasContent()}" class="empty-list">
                í˜„ì¬ ë“±ë¡ëœ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.
                <span sec:authorize="isAuthenticated()">
                    <a th:href="@{/boards/new}">ì²« ë²ˆì§¸ ê¸€ì„ ì‘ì„±í•´ë³´ì„¸ìš”!</a>
                </span>
                <span sec:authorize="isAnonymous()">
                    <a th:href="@{/auth/login}">ë¡œê·¸ì¸</a> í›„ ê¸€ì„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </span>
            </div>
            <!-- === í˜ì´ì§• ì²˜ë¦¬ === -->
            <div class="pagination" th:if="${boards.hasContent()}">
                <a th:href="${hasPrevGroup} ? @{/boards(page=${prevGroupPage},size=10)} : '#'" th:classappend="${!hasPrevGroup} ? 'disabled' : '' " class="page-btn nav"> <<ì´ì „ </a>
                <!-- í˜ì´ì§€ ë²ˆí˜¸ ë²„íŠ¼ë“¤ -->
                <!-- <span th:each="i : ${#numbers.sequence(startPage, endPage)}">
                    <a th:href="@{/boards(page=${i},size=10)}"
                    th:text="${i}"
                    th:classappend="${i == currentPage} ? 'active' : ''" class="page-btn">1</a>
                </span> -->
                <a th:each="pageNum : ${#numbers.sequence(startPage, endPage)}" th:href="@{/boards(page=${pageNum},size=10)}" th:text="${pageNum}" th:classappend="${pageNum == currentPage} ? 'active' : '' " class="page-btn"></a>
                <a th:href="${hasNextGroup} ? @{/boards(page=${nextGroupPage},size=10)} : '#'" th:classappend="${!hasNextGroup} ? 'disabled' : '' " class="page-btn nav">ì´í›„>></a>
            </div>
        </div>
    </div>
    <!-- ê²Œì‹œíŒ ì „ìš© JavaScript -->
    <div th:fragment="scripts"></div>
</body>
</html>